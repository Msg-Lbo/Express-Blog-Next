name: pushè‡ªåŠ¨æ›´æ–°

on:
  push:
    branches:
      - main

env: # è®¾ç½®ç¯å¢ƒå˜é‡
  TZ: Asia/Shanghai # æ—¶åŒºï¼ˆè®¾ç½®æ—¶åŒºå¯ä½¿é¡µé¢ä¸­çš„`æœ€è¿‘æ›´æ–°æ—¶é—´`ä½¿ç”¨æ—¶åŒºæ—¶é—´ï¼‰

jobs:
  build: # è‡ªå®šä¹‰åç§°
    runs-on: ubuntu-latest
    steps:
      - name: ğŸš€ Checkout code
        uses: actions/checkout@v2

      - name: Use Node.js
        uses: actions/setup-node@v2
        with:
          node-version: '20'
      
      - name: ğŸ› ï¸ Build
        run: |
          npm install
          npm run build
          
      - name: ğŸš éƒ¨ç½²åˆ°æœåŠ¡å™¨
        uses: wlixcc/SFTP-Deploy-Action@v1.2.4
        with:
          username: 'root' #ssh user name
          port: '22' # è¿œç¨‹æœåŠ¡å™¨sshç«¯å£ï¼Œé»˜è®¤22
          server: ${{ secrets.IP }} # è¿œç¨‹æœåŠ¡å™¨IPåœ°å€
          ssh_private_key: ${{ secrets.SSH_PRIVATE_KEY }} # è®¤è¯æœåŠ¡å™¨ç§˜é’¥å¯¹çš„ç§é’¥
          local_path: './dist/*' # å¯¹åº”æˆ‘ä»¬é¡¹ç›®æ‰“åŒ…åçš„é™æ€æ–‡ä»¶è·¯å¾„
          remote_path: '/opt/1panel/apps/openresty/openresty/www/sites/blog.ylmty.cc/index' # æœåŠ¡å™¨ä¸Šçš„è·¯å¾„
          delete_remote_files: true # æ˜¯å¦åˆ é™¤è¿œç¨‹æœåŠ¡å™¨ä¸Šçš„æ–‡ä»¶
